<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Assignment5</title>
    <link rel="stylesheet" href="https://mooozi.github.io/lectures/css/reset.css">
    <link rel="stylesheet" href="https://mooozi.github.io/lectures/css/font.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="design.css">
</head>

<body>
    <div id="container">
        <h1 id="heading">Lucky for Life</h1>

        <button onclick="get_winning_numbers()" class="btn-user-input">Get winning numbers</button>

        <button onclick="get_lucky_number()" class="btn-user-input">Get lucky number</button>

        <div id="winning-lottery-box" class="div-box">
            <p id="input-winning-numbers">Input winning numbers</p>
            <p id="input-lucky-number">Input lucky number</p>
        </div>

        <div id="random-lottery-box" class="div-box">
            <p id="random-winning-numbers">Random winning numbers</p>
            <p id="random-lucky-number">Random lucky number</p>
        </div>

        <div id="prize-box" class="div-box">
            <p id="prize">Prize</p>
        </div>

    </div>
    

    <script type="text/javascript">
        var input_winningNumbers = new Array(5);
        var input_luckyNumber = -1;
        var random_winningNumbers = [];
        var random_luckyNumber = -1;
        var count_winningNumbers = 0;
        var flag_luckyNumber = false;

        /* ------------------------------------------------------------------------------------- */
        // Onload: Generate random lottery numbers
        window.onload = function() {
            // Random winning numbers
            for (i = 0; i < 5; i++) {
                flag = false;
                while (!flag) {
                    num = getRandomInt(48);
                    flag = check_duplicate(random_winningNumbers, num);
                    if (flag) { random_winningNumbers.push(num); }
                }
            }
            random_winningNumbers.sort(function(a, b) { return a-b; });
            document.getElementById("random-winning-numbers").innerHTML = random_winningNumbers;

            // Random lucky number
            flag = false;
            while (!flag) {
                random_luckyNumber = getRandomInt(18);
                flag = check_duplicate(random_winningNumbers, random_luckyNumber);
                if (flag) { document.getElementById("random-lucky-number").innerHTML = random_luckyNumber; }
            }

            
        }

        function getRandomInt(bound) {
            return parseInt(Math.floor(Math.random() * bound) + 1, 10);
        }

        /* ------------------------------------------------------------------------------------- */
        // Prompt user to enter winning numbers
        function get_winning_numbers() {
            var input = prompt("Enter the winning numbers.", "");

            input_winningNumbers = input.split(' ').map(function(item) {
                return parseInt(item, 10);
            });

            input_winningNumbers.sort(function(a, b) { return a-b; });
            document.getElementById("input-winning-numbers").innerHTML = input_winningNumbers;

            count_winning_numbers();
            determine_prize();
        }

        function get_lucky_number() {
            var input = prompt("Enter the lucky number.", "");

            input_luckyNumber = parseInt(input);
            document.getElementById("input-lucky-number").innerHTML = input_luckyNumber;

            flag_lucky_number();
            determine_prize();
        }


        /* ------------------------------------------------------------------------------------- */
        // Generate a set of random numbers with no repeats (with no duplicates)
        function check_duplicate(arr, num) {
            for (i = 0; i < arr.length; i++) {
                if (num == arr[i]) return false;
            }
            return true;
        }

        function count_winning_numbers() {
            // In case we have to consider duplicates in the set of random numbers (with repeats), 
            // so to remove duplicates
            let unique = [...new Set(random_winningNumbers)];
            count_winningNumbers = 0;
            for (i = 0; i < 5; i++) {
                if (input_winningNumbers.includes(unique[i])) {
                    count_winningNumbers += 1;
                }
            }
        }

        function flag_lucky_number() {
            flag_luckyNumber = false;
            if (random_luckyNumber == input_luckyNumber) flag_luckyNumber = true;
        }


        /* ------------------------------------------------------------------------------------- */
        function determine_prize() {
            console.log(count_winningNumbers);
            console.log(flag_luckyNumber);
            
            if (flag_luckyNumber) {
                if (count_winningNumbers == 5) document.getElementById("prize").innerHTML = "$7,000 a WEEK for LIFE";
                else if (count_winningNumbers == 4) document.getElementById("prize").innerHTML = "$5,000";
                else if (count_winningNumbers == 3) document.getElementById("prize").innerHTML = "$150";
                else if (count_winningNumbers == 2) document.getElementById("prize").innerHTML = "$25";
                else if (count_winningNumbers == 1) document.getElementById("prize").innerHTML = "$6";
                else document.getElementById("prize").innerHTML = "NO PRIZE";
            } else {
                if (count_winningNumbers == 5) document.getElementById("prize").innerHTML = "$25,000 a YEAR for LIFE";
                else if (count_winningNumbers == 4) document.getElementById("prize").innerHTML = "$200";
                else if (count_winningNumbers == 3) document.getElementById("prize").innerHTML = "$20";
                else if (count_winningNumbers == 2) document.getElementById("prize").innerHTML = "$3";
                else document.getElementById("prize").innerHTML = "NO PRIZE";
            }
        }
    </script>

</body>

</html>